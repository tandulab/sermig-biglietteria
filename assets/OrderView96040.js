import{l as Oe,m as we,o as Y,p as w,a as $,c as N,_ as X,r as b,q as pe,b as f,e as h,g as n,f as i,n as J,t as x,w as D,s as A,F as te,h as E,v as de,x as Ne,B as je,C as fe,Z as De,D as se,y as dt,O as ut,z as mt,A as ft,E as pt,G as _t,H as Q,I as ge,J as ce,K as Te,L as Ae,T as vt,M as yt,i as ae,N as he,P as gt,Q as Fe,u as ht}from"../index96040.js";import{u as oe,a as _e,f as Ue,b as Ve,c as bt,d as kt,e as be,g as Le,h as ke,i as Ct,D as ue,j as Me}from"./location96040.js";import{u as me,s as Z,e as B,p as Ee,a as wt,b as Se,c as Ce,d as Re}from"./helpers96040.js";import{F as xt}from"./vee-validate.esm96040.js";class Pe{static async fetchAll(e){const l=e.location_permalink;return delete e.location_permalink,(await Oe(`/ticket_office/${l}/search/tickets`,e)).data}static async fetchAllOpenTickets(e){const l=e.location_permalink;return delete e.location_permalink,(await Oe(`/ticket_office/${l}/orders/search_codes`,e)).data}}const xe=we({id:"ticket",state:()=>({ticket:{},tickets:[],response_tickets:{},open_tickets_codes:{}}),getters:{allTickets:o=>o.response_tickets.available_ticket_types,allOpenTickets:o=>o.open_tickets_codes.open_tickets,responseTickets:o=>o.response_tickets,getTotalTickets:o=>o.response_tickets?o.response_tickets.total:0,getCurrentTicket:o=>o.ticket},actions:{async fetchAllTickets(o){await Pe.fetchAll(o).then(e=>this.response_tickets=e)},async fetchAllOpenTickets(o){await Pe.fetchAllOpenTickets(o).then(e=>this.open_tickets_codes=e)}}}),Dt={computed:{Code(){return Code}},props:["location_permalink","time_slot"],setup(o,e){Y(()=>{l.value=Object.assign({},o.time_slot)});const l=w({}),t=xe(),g=oe(),{showLoader:p,hideLoader:a}=me(),m=$(),k=w(),u=w(),r=N(()=>t.allOpenTickets),_=N(()=>g.paymentStatus),v=N(()=>g.paymentModeList),V=N(()=>{const O=g.getPaymentMethods;return Object.entries(O).map(([d,S])=>({id:d,label:S}))}),c=N(()=>g.getCurrentOrder),s=async function(O){const d={code:O.query.toUpperCase(),location_permalink:o.location_permalink};await t.fetchAllOpenTickets(d)},F=async function(){var d,S;const O={id:o.location_permalink,order_id:l.value.id,status:(d=l.value)==null?void 0:d.status,payment_method:l.value.payment_method,open_ticket_codes:[],api_version:"v2",notes:(S=l.value)==null?void 0:S.notes};if(l.value.status&&l.value.status=="payed"&&!l.value.payment_method){k.value="Seleziona un metodo di pagamento";return}for(const C of l.value.open_tickets_used)if(C.expired){u.value="Uno o più codici biglietto risultano scaduti";return}if(l.value.open_tickets_used&&l.value.open_tickets_used.length>0){let C=[];l.value.open_tickets_used.forEach(R=>{C.push(R.code)}),O.open_ticket_codes=C}j(O)},j=async function(O){p(),await g.updateOrder(O).then(()=>{a(),Z(m,{message:"Stato aggiornato correttamente",error:!1}),e.emit("closeDialog",c.value)}).catch(d=>{a(),B(m,d)})};return{form:l,open_tickets:r,paymentList:_,paymentModeList:v,changeStatus:F,errorMessage:k,errorMessageVoucher:u,dynamicPaymentMethods:V,fetchAllOpenTickets:s,onChangeStatus:function(){(l.value.status=="free"||l.value.status=="to_pay")&&(l.value.payment_method=null)}}}},Ot={key:0,class:"formgrid grid flex-column mt-3"},St={class:"field col-12"},Vt={class:"field col-12"},Lt={class:"p-error",id:"dd-error"},Tt={key:0,class:"field col-12 flex flex-column"},At={key:0,class:"pi pi-exclamation-triangle",style:{color:"#ff6767"}},Mt={class:"p-error",id:"dd-error"},Pt={class:"flex align-items-center justify-content-end mt-3"};function Nt(o,e,l,t,g,p){const a=b("Dropdown"),m=b("AutoComplete"),k=b("Button"),u=pe("tooltip");return f(),h(te,null,[t.form?(f(),h("div",Ot,[n("div",St,[e[9]||(e[9]=n("label",{for:"status"},"Stato pagamento",-1)),i(a,{modelValue:t.form.status,"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.status=r),options:t.paymentList,optionLabel:"name",optionValue:"id",class:"w-full",onChange:e[1]||(e[1]=r=>t.onChangeStatus())},null,8,["modelValue","options"])]),n("div",Vt,[e[10]||(e[10]=n("label",{for:"payment_method"},"Modalità pagamento",-1)),i(a,{modelValue:t.form.payment_method,"onUpdate:modelValue":e[2]||(e[2]=r=>t.form.payment_method=r),options:t.dynamicPaymentMethods,optionLabel:"label",optionValue:"id",class:J(["w-full",{"p-invalid":t.errorMessage}]),disabled:t.form.status!="payed",onChange:e[3]||(e[3]=r=>t.errorMessage=null)},null,8,["modelValue","options","disabled","class"]),n("small",Lt,x(t.errorMessage||" "),1)]),t.form.payment_method=="voucher"&&t.form.status=="payed"?(f(),h("div",Tt,[e[11]||(e[11]=n("label",{for:"user_zip"},"Codice biglietto",-1)),i(m,{modelValue:t.form.open_tickets_used,"onUpdate:modelValue":e[4]||(e[4]=r=>t.form.open_tickets_used=r),suggestions:t.open_tickets,class:J(["uppercase w-full",{"p-invalid":t.errorMessageVoucher}]),onComplete:e[5]||(e[5]=r=>t.fetchAllOpenTickets(r)),emptySearchMessage:"Nessun risultato",emptySelectionMessage:"Nessun risultato",optionLabel:"code",optionValue:"code",multiple:"",onChange:e[6]||(e[6]=r=>t.errorMessageVoucher=null)},{option:D(({option:r})=>[n("span",{class:"flex flex-row justify-content-between",style:Ne({color:r.expired?"#ff6767":null})},[E(x(r.code)+" ",1),r.expired?de((f(),h("i",At,null,512)),[[u,"Scaduto"]]):A("",!0)],4)]),_:1},8,["modelValue","suggestions","class"]),n("small",Mt,x(t.errorMessageVoucher||" "),1)])):A("",!0)])):A("",!0),n("div",Pt,[i(k,{label:"Annulla",text:"",onClick:e[7]||(e[7]=r=>o.$emit("closeDialog",null))}),i(k,{label:"Conferma",onClick:e[8]||(e[8]=r=>t.changeStatus())})])],64)}const jt=X(Dt,[["render",Nt]]);var Ft={root:function(e){var l=e.instance;return["p-confirm-popup p-component",{"p-ripple-disabled":l.$primevue.config.ripple===!1}]},content:"p-confirm-popup-content",icon:"p-confirm-popup-icon",message:"p-confirm-popup-message",footer:"p-confirm-popup-footer",rejectButton:function(e){var l=e.instance;return["p-confirm-popup-reject",l.confirmation&&!l.confirmation.rejectClass?"p-button-sm p-button-text":null]},acceptButton:function(e){var l=e.instance;return["p-confirm-popup-accept",l.confirmation&&!l.confirmation.acceptClass?"p-button-sm":null]}},Ut=je.extend({name:"confirmpopup",classes:Ft}),Et={name:"BaseConfirmPopup",extends:_t,props:{group:String},style:Ut,provide:function(){return{$parentInstance:this}}},Be={name:"ConfirmPopup",extends:Et,inheritAttrs:!1,data:function(){return{visible:!1,confirmation:null,autoFocusAccept:null,autoFocusReject:null,target:null}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,confirmListener:null,closeListener:null,mounted:function(){var e=this;this.confirmListener=function(l){l&&l.group===e.group&&(e.confirmation=l,e.target=l.target,e.confirmation.onShow&&e.confirmation.onShow(),e.visible=!0)},this.closeListener=function(){e.visible=!1,e.confirmation=null},fe.on("confirm",this.confirmListener),fe.on("close",this.closeListener)},beforeUnmount:function(){fe.off("confirm",this.confirmListener),fe.off("close",this.closeListener),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindResizeListener(),this.container&&(De.clear(this.container),this.container=null),this.target=null,this.confirmation=null},methods:{accept:function(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject:function(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onHide:function(){this.confirmation.onHide&&this.confirmation.onHide(),this.visible=!1},onAcceptKeydown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&(this.accept(),se.focus(this.target),e.preventDefault())},onRejectKeydown:function(e){(e.code==="Space"||e.code==="Enter"||e.code==="NumpadEnter")&&(this.reject(),se.focus(this.target),e.preventDefault())},onEnter:function(e){this.autoFocusAccept=this.confirmation.defaultFocus===void 0||this.confirmation.defaultFocus==="accept",this.autoFocusReject=this.confirmation.defaultFocus==="reject",this.target=document.activeElement,this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),De.set("overlay",e,this.$primevue.config.zIndex.overlay)},onAfterEnter:function(){this.focus()},onLeave:function(){this.autoFocusAccept=null,this.autoFocusReject=null,se.focus(this.target),this.target=null,this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener()},onAfterLeave:function(e){De.clear(e)},alignOverlay:function(){se.absolutePosition(this.container,this.target,!1);var e=se.getOffset(this.container),l=se.getOffset(this.target),t=0;e.left<l.left&&(t=l.left-e.left),this.container.style.setProperty("--overlayArrowLeft","".concat(t,"px")),e.top<l.top&&(this.container.setAttribute("data-p-confirm-popup-flipped","true"),!this.isUnstyled&&se.addClass(this.container,"p-confirm-popup-flipped"))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(l){e.visible&&e.container&&!e.container.contains(l.target)&&!e.isTargetClicked(l)?(e.confirmation.onHide&&e.confirmation.onHide(),e.visible=!1):e.alignOverlay()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new dt(this.target,function(){e.visible&&(e.visible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.visible&&!se.isTouchDevice()&&(e.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},focus:function(){var e=this.container.querySelector("[autofocus]");e&&e.focus({preventScroll:!0})},isTargetClicked:function(e){return this.target&&(this.target===e.target||this.target.contains(e.target))},containerRef:function(e){this.container=e},onOverlayClick:function(e){ut.emit("overlay-click",{originalEvent:e,target:this.target})},onOverlayKeydown:function(e){e.code==="Escape"&&(fe.emit("close",this.closeListener),se.focus(this.target))},getCXOptions:function(e,l){return{contenxt:{icon:e,iconClass:l.class}}}},computed:{message:function(){return this.confirmation?this.confirmation.message:null},acceptLabel:function(){return this.confirmation?this.confirmation.acceptLabel||this.$primevue.config.locale.accept:null},rejectLabel:function(){return this.confirmation?this.confirmation.rejectLabel||this.$primevue.config.locale.reject:null},acceptIcon:function(){return this.confirmation?this.confirmation.acceptIcon:null},rejectIcon:function(){return this.confirmation?this.confirmation.rejectIcon:null}},components:{CPButton:mt,Portal:ft},directives:{focustrap:pt}},Rt=["aria-modal"];function Bt(o,e,l,t,g,p){var a=b("CPButton"),m=b("Portal"),k=pe("focustrap");return f(),Q(m,null,{default:D(function(){return[i(vt,ce({name:"p-confirm-popup",onEnter:p.onEnter,onAfterEnter:p.onAfterEnter,onLeave:p.onLeave,onAfterLeave:p.onAfterLeave},o.ptm("transition")),{default:D(function(){return[g.visible?de((f(),h("div",ce({key:0,ref:p.containerRef,role:"alertdialog",class:o.cx("root"),"aria-modal":g.visible,onClick:e[2]||(e[2]=function(){return p.onOverlayClick&&p.onOverlayClick.apply(p,arguments)}),onKeydown:e[3]||(e[3]=function(){return p.onOverlayKeydown&&p.onOverlayKeydown.apply(p,arguments)})},o.ptmi("root")),[o.$slots.container?ge(o.$slots,"container",{key:0,message:g.confirmation,onAccept:p.accept,onReject:p.reject,acceptCallback:p.accept,rejectCallback:p.reject}):(f(),h(te,{key:1},[o.$slots.message?(f(),Q(Te(o.$slots.message),{key:1,message:g.confirmation},null,8,["message"])):(f(),h("div",ce({key:0,class:o.cx("content")},o.ptm("content")),[ge(o.$slots,"icon",{},function(){return[o.$slots.icon?(f(),Q(Te(o.$slots.icon),{key:0,class:J(o.cx("icon"))},null,8,["class"])):g.confirmation.icon?(f(),h("span",ce({key:1,class:[g.confirmation.icon,o.cx("icon")]},o.ptm("icon")),null,16)):A("",!0)]}),n("span",ce({class:o.cx("message")},o.ptm("message")),x(g.confirmation.message),17)],16)),n("div",ce({class:o.cx("footer")},o.ptm("footer")),[i(a,{label:p.rejectLabel,onClick:e[0]||(e[0]=function(u){return p.reject()}),onKeydown:p.onRejectKeydown,autofocus:g.autoFocusReject,class:J([o.cx("rejectButton"),g.confirmation.rejectClass]),unstyled:o.unstyled,pt:o.ptm("rejectButton")},Ae({_:2},[p.rejectIcon||o.$slots.rejecticon?{name:"icon",fn:D(function(u){return[ge(o.$slots,"rejecticon",{},function(){return[n("span",ce({class:[p.rejectIcon,u.class]},o.ptm("rejectButton").icon,{"data-pc-section":"rejectbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1032,["label","onKeydown","autofocus","class","unstyled","pt"]),i(a,{label:p.acceptLabel,onClick:e[1]||(e[1]=function(u){return p.accept()}),onKeydown:p.onAcceptKeydown,autofocus:g.autoFocusAccept,class:J([o.cx("acceptButton"),g.confirmation.acceptClass]),unstyled:o.unstyled,pt:o.ptm("acceptButton")},Ae({_:2},[p.acceptIcon||o.$slots.accepticon?{name:"icon",fn:D(function(u){return[ge(o.$slots,"accepticon",{},function(){return[n("span",ce({class:[p.acceptIcon,u.class]},o.ptm("acceptButton").icon,{"data-pc-section":"acceptbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1032,["label","onKeydown","autofocus","class","unstyled","pt"])],16)],64))],16,Rt)),[[k]]):A("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3})}Be.render=Bt;const It={props:["order"],setup(o,{emit:e}){Y(()=>{d.value&&O.value&&d.value.forEach(U=>{U.permalink===O.value&&(a.value=U.name)})});const l=w(0),t=w([]),g=w(!1),p=w(!0),a=w(),m=yt(),k=w([]),u=w({}),r=w(null),_=w(!1),v=w({...o.order});ae(()=>o.order,U=>{Object.assign(v,U)});const V=xe(),c=oe(),s=$(),F=_e(),j=N(()=>V.allTickets),L=N(()=>c.getCurrentOrder),O=N(()=>F.getCurrentLocation),d=N(()=>F.allLocations),S=N(()=>{const U=o.order.payment_method,I=c.getPaymentMethods;return U?I[U]:"-"}),C=N(()=>{const U=c.getPaymentMethods;return Object.entries(U).map(([I,q])=>({id:I,label:q}))}),R=N(()=>c.paymentMethodAccountList),ne=[{label:"Acconto",value:"deposit"},{label:"Saldo",value:"balance"}],T=U=>U==="deposit"?"Acconto":U==="balance"?"Saldo":"-",z=(U,I)=>{r.value=U,m.require({target:I.currentTarget,message:"Sei sicuro di voler eliminare questo acconto?",icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:"Annulla",acceptLabel:"Elimina",accept:async()=>{var q;await c.deletePayment({location:((q=O.value)==null?void 0:q.permalink)??"",id:o.order.id,payment_id:r.value.id}),await re(),Z(s,{message:"Acconto eliminato con successo",error:!1})}})},H=function(){let U={amount:"",payment_method:"",typology:"",id:"-1"};v.value.payments.push(U),k.value.push(U)},ie=async function(U){var I,q;_.value=!0;try{let{newData:G}=U;const ve={amount:G.amount,payment_method:G.payment_method,typology:G.typology,paid_at:be(G.paid_at)};G.id!=-1?await c.updatePayment({location:((I=O.value)==null?void 0:I.permalink)??"",id:o.order.id,payment_id:G.id,payment:ve}):await c.createPayment({location:((q=O.value)==null?void 0:q.permalink)??"",id:o.order.id,payment:ve}),await re()}catch(G){B(s,G)}finally{_.value=!1}},le=function(U,I){u.value.payments.splice(I,1)},re=async function(){var U;try{const I=await c.getPayment({location:((U=O.value)==null?void 0:U.permalink)??"",id:o.order.id});v.value.payments.splice(0,v.value.payments.length,...I.payments),v.value.paid_amount=I.paid_amount,v.value.remaining_amount=I.remaining_amount}catch{v.value.remaining_amount="0.0",v.value.paid_amount="0.0",v.value.payments=[]}};return{tickets:j,active:l,partialTotals:t,showOrderDetail:g,currentOrder:L,showSecondTab:p,currentLocation:O,selectedLocation:a,editingRows:k,localOrder:v,loadingPayments:_,formatExplicitDate:Ue,formatDate:Ve,confirm1:z,addAmount:H,onRowEditSave:ie,deleteSlot:le,dynamicPaymentMethods:C,typologyOptions:ne,getPayments:re,paymentMethodAccountList:R,prettyPaymentStatus:Ee,formatPrettyDate:bt,formatDataAndHourFromUnixTimestamps:kt,prettyPaymentMethod:wt,methodLabel:S,prettyTypology:T}},components:{ConfirmPopup:Be}};const zt={class:"mt-3 line-height-3"},qt={class:"flex gap-3"},Ht={class:"m-0 mb-1"},Kt={class:"m-0 mb-1"},Jt={class:"m-0 mb-1"},Gt={class:"m-0 mb-1"},Wt={key:0},Qt={class:"flex gap-3 mt-4"},Xt={class:"m-0 mb-1"},Zt={class:"m-0 mb-1"},Yt={key:0,class:"m-0 mb-1"},$t={class:"flex gap-3 mt-4"},eo={class:"m-0 mb-1"},to={class:"m-0 mb-1"},oo={class:"m-0 mb-1"},no={key:0,class:"m-0 mb-1"},lo={key:1,class:"m-0 mb-1"},ao={key:2,class:"m-0 mb-1"},io={class:"m-0 mb-1"},so={class:"m-0 mb-1"},ro={key:0},co={key:1},uo={class:"m-0 mb-1"},mo={key:0},fo={key:1},po={class:"m-0 mb-1"},_o={key:0},vo={key:1},yo={class:"ml-5"},go={class:"field flex justify-content-between align-items-end mt-4 mb-3"},ho={key:1,class:"flex gap-3 mt-4"};function bo(o,e,l,t,g,p){const a=b("Badge"),m=b("Button"),k=b("InputNumber"),u=b("Column"),r=b("Calendar"),_=b("Dropdown"),v=b("DataTable"),V=b("ConfirmPopup");return f(),h("div",zt,[n("div",qt,[e[3]||(e[3]=n("i",{class:"pi pi-user mt-1"},null,-1)),n("div",null,[n("p",Ht,x(l.order.user_name)+" "+x(l.order.user_surname||"-"),1),n("p",Kt,x(l.order.user_email),1),n("p",Jt,x(l.order.user_phone),1),n("p",Gt,[E(x(l.order.country)+" ",1),l.order.user_zip?(f(),h("span",Wt," - "+x(l.order.user_zip),1)):A("",!0)])])]),n("div",Qt,[e[4]||(e[4]=n("i",{class:"pi pi-map-marker mt-1"},null,-1)),n("div",null,[n("p",Xt,x(t.selectedLocation),1),n("p",Zt,x(l.order.course_name),1),l.order.date?(f(),h("p",Yt,x(t.formatPrettyDate(l.order.date))+" "+x(l.order.start_at),1)):A("",!0)])]),n("div",$t,[e[8]||(e[8]=n("i",{class:"pi pi-shopping-cart mt-1"},null,-1)),n("div",null,[n("p",eo,x(l.order.reservation_number),1),n("p",to,x(t.formatDataAndHourFromUnixTimestamps(l.order.created_at)),1),n("p",oo,x(l.order.created_by),1),l.order.status?(f(),h("p",no,[i(a,{value:t.prettyPaymentStatus(l.order.status),class:J([l.order.status,"px-3 border-round-lg"])},null,8,["value","class"])])):A("",!0),l.order.status=="payed"?(f(),h("p",lo,x(t.methodLabel),1)):A("",!0),l.order.open_tickets_used&&l.order.status=="payed"?(f(),h("p",ao,[(f(!0),h(te,null,he(l.order.open_tickets_used,c=>(f(),h("span",{key:c},[i(a,{value:c.code,class:"mr-2 voucher"},null,8,["value"])]))),128))])):A("",!0),n("p",io," Codice sconto utilizzato: "+x(t.localOrder.discount_code||"-"),1),n("p",so,[e[5]||(e[5]=E(" Totale ordine: ",-1)),t.localOrder.total?(f(),h("span",ro,"€ "+x((+t.localOrder.total).toFixed(2)),1)):(f(),h("span",co,"-"))]),t.localOrder.multi_payment&&t.localOrder.paid_amount!="0.0"?(f(),h(te,{key:3},[n("p",uo,[e[6]||(e[6]=E(" Acconto versato: ",-1)),t.localOrder.paid_amount?(f(),h("span",mo,"€ "+x((+t.localOrder.paid_amount).toFixed(2)),1)):(f(),h("span",fo,"-"))]),n("p",po,[e[7]||(e[7]=E(" Saldo rimanente: ",-1)),t.localOrder.remaining_amount?(f(),h("span",_o,"€ "+x((+t.localOrder.remaining_amount).toFixed(2)),1)):(f(),h("span",vo,"-"))])],64)):t.localOrder.multi_payment&&(!t.localOrder.payments||t.localOrder.payments.length===0)?(f(),Q(m,{key:4,label:"Acconto / Saldo",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[0]||(e[0]=c=>t.addAmount()),class:"mt-2"})):A("",!0)])]),t.localOrder.payments&&t.localOrder.payments.length?(f(),h(te,{key:0},[n("div",yo,[n("div",go,[e[9]||(e[9]=n("label",null,"Pagamenti",-1)),t.localOrder.remaining_amount!=="0.0"?(f(),Q(m,{key:0,label:"Acconto / Saldo",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[1]||(e[1]=c=>t.addAmount())})):A("",!0)]),i(v,{value:t.localOrder.payments,dataKey:"id",size:"small",editingRows:t.editingRows,"onUpdate:editingRows":e[2]||(e[2]=c=>t.editingRows=c),editMode:"row",onRowEditSave:t.onRowEditSave,loading:t.loadingPayments},{default:D(()=>[i(u,{field:"amount",header:"Importo"},{editor:D(({data:c,field:s})=>[i(k,{modelValue:c[s],"onUpdate:modelValue":F=>c[s]=F,inputId:"currency-germany",mode:"currency",currency:"EUR",locale:"it-IT",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),body:D(c=>[E(x(c.data.amount?Number(c.data.amount).toFixed(2):"0.00")+" € ",1)]),_:1}),i(u,{field:"paid_at",header:"Data pagamento"},{body:D(c=>[E(x(c.data.paid_at),1)]),editor:D(({data:c,field:s})=>[i(r,{modelValue:c[s],"onUpdate:modelValue":F=>c[s]=F},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(u,{field:"payment_method",header:"Metodo"},{editor:D(({data:c,field:s})=>[i(_,{modelValue:c[s],"onUpdate:modelValue":F=>c[s]=F,options:t.dynamicPaymentMethods,optionLabel:"label",optionValue:"id",class:"w-full",placeholder:"Seleziona metodo..."},null,8,["modelValue","onUpdate:modelValue","options"])]),body:D(c=>[E(x(t.prettyPaymentMethod(c.data.payment_method)),1)]),_:1}),i(u,{field:"typology",header:"Tipologia"},{editor:D(({data:c,field:s})=>[i(_,{modelValue:c[s],"onUpdate:modelValue":F=>c[s]=F,options:t.typologyOptions,optionLabel:"label",optionValue:"value",class:"w-full",placeholder:"Seleziona tipologia"},null,8,["modelValue","onUpdate:modelValue","options"])]),body:D(c=>[E(x(t.prettyTypology(c.data.typology)),1)]),_:1}),i(u,{rowEditor:!0,style:{width:"8rem"},bodyStyle:"text-align:right"}),i(u,{header:""},{body:D(c=>[c.data.id!=="-1"?(f(),Q(m,{key:0,icon:"pi pi-trash",class:"p-button-text p-button-sm p-button-danger",onClick:s=>t.confirm1(c.data,s)},null,8,["onClick"])):A("",!0)]),_:1})]),_:1},8,["value","editingRows","onRowEditSave","loading"])]),i(V)],64)):A("",!0),l.order.notes?(f(),h("div",ho,[e[10]||(e[10]=n("i",{class:"pi pi-comment mt-1"},null,-1)),n("div",null,x(l.order.notes),1)])):A("",!0)])}const ko=X(It,[["render",bo]]),Co={props:["order","location_permalink"],setup(o,e){Y(()=>{o.order&&o.order.notes&&(l.value=o.order.notes)});const l=w(),{showLoader:t,hideLoader:g}=me(),p=$(),a=oe(),m=N(()=>a.getCurrentOrder);return{notes:l,updateOrder:async function(){const u={id:o.location_permalink,order_id:o.order.id,notes:l.value,api_version:"v2"};t(),await a.updateOrder(u).then(()=>{g(),Z(p,{message:"Nota aggiornata correttamente",error:!1}),e.emit("closeDialog",m.value)}).catch(r=>{g(),B(p,r)})}}}},wo={class:"pt-5 px-2"},xo={class:"flex align-items-center justify-content-end mt-3"};function Do(o,e,l,t,g,p){const a=b("Textarea"),m=b("Button");return f(),h("div",wo,[i(a,{modelValue:t.notes,"onUpdate:modelValue":e[0]||(e[0]=k=>t.notes=k),rows:"8",cols:"30",class:"w-full"},null,8,["modelValue"]),n("div",xo,[i(m,{label:"Annulla",text:"",onClick:e[1]||(e[1]=k=>o.$emit("closeDialog",null))}),i(m,{label:"Conferma",onClick:e[2]||(e[2]=k=>t.updateOrder())})])])}const Oo=X(Co,[["render",Do]]),So={props:["order","location_permalink","date"],setup(o,e){Y(()=>{var _;o.order&&o.order.note&&(l.value=(_=o.order.note)==null?void 0:_.note)});const l=w(),{showLoader:t,hideLoader:g}=me(),p=$(),a=oe(),m=async function(){var v;const _={location:o.location_permalink,time_slot_note:{course_id:o.order.course_id,start_at:o.order.start_at,date:o.date,note:l.value}};(v=o.order.note)!=null&&v.id?k(_):u(_)},k=async function(_){t(),_.id=o.order.note.id,await a.updateNote(_).then(()=>{g(),Z(p,{message:"Nota aggiornata correttamente",error:!1}),e.emit("closeDialog",null)}).catch(v=>{g(),B(p,v)})},u=async function(_){t(),await a.createNote(_).then(()=>{g(),Z(p,{message:"Nota creata correttamente",error:!1}),e.emit("closeDialog",null)}).catch(v=>{g(),B(p,v)})};return{notes:l,addNote:m,deleteNote:async function(){const _={location:o.location_permalink,id:o.order.note.id};t(),await a.deleteNote(_).then(()=>{g(),Z(p,{message:"Nota eliminata correttamente",error:!1}),e.emit("closeDialog",null)}).catch(v=>{g(),B(p,v)})}}}},Vo={class:"pt-5 px-2"},Lo={class:"flex align-items-center justify-content-end mt-3"};function To(o,e,l,t,g,p){var k,u;const a=b("Textarea"),m=b("Button");return f(),h("div",Vo,[i(a,{modelValue:t.notes,"onUpdate:modelValue":e[0]||(e[0]=r=>t.notes=r),rows:"8",cols:"30",class:"w-full"},null,8,["modelValue"]),n("div",Lo,[(u=(k=l.order)==null?void 0:k.note)!=null&&u.id?(f(),Q(m,{key:0,label:"Elimina",text:"",onClick:e[1]||(e[1]=r=>t.deleteNote()),severity:"danger",class:"mr-2"})):A("",!0),i(m,{label:"Conferma",onClick:e[2]||(e[2]=r=>t.addNote())})])])}const Ao=X(So,[["render",To]]),Mo={props:["filters"],setup(o,e){Y(()=>{L.value=!0,O.value={first:0,rows:V.value.rows,sortField:null,sortOrder:null},O.value.page=0,o.filters.location&&le()});const l=oe(),t=Le(),g=N(()=>l.responseOrders),p=N(()=>l.status),a=gt(),m=N(()=>a.submitDialog),k=N(()=>l.paymentStatus),u=N(()=>l.getDeleteResponse),{showLoader:r,hideLoader:_}=me(),v=$(),V=w(),c=w(),s=w(),F=w(),j=w(),L=w(!0),O=w(),d=w(0),S=w([]),C=w([]),R=w(!1),ne=w(!1),T=w(),z=w(!1),H=w(!1),ie=w();function le(){L.value=!0;let y=new Map;for(const M in o.filters){if(M=="date"){let P="";ke(o.filters.date)=="Invalid DateTime"?P=be(o.filters.date):P=ke(o.filters.date),y.set("date",P),ie.value=P}else o.filters.location&&y.set("location_permalink",o.filters.location.permalink);M=="course"&&o.filters.course.id!="-1"&&y.set("course",o.filters.course.id),M=="hour"&&o.filters.hour!="Tutti gli orari"&&y.set("hour",o.filters.hour),M=="name"&&y.set("name",o.filters.name)}setTimeout(()=>{re(y)},Math.random()*1e3+250)}const re=async function(y){await l.fetchAllOrders(y).then(()=>{L.value=!1}).catch(M=>{L.value=!1,B(v,M)})},U=y=>{s.value.toggle(y),T.value.toggle(y)},I=(y,M)=>y>y+M?"red":"green",q=function(y,M){M&&(s.value.note=M,s.value.toggle(y))},G=function(y){y.order&&g.value.time_slots&&g.value.time_slots.forEach((M,P)=>{M.orders.forEach((K,W)=>{K.id==y.order.id&&(g.value.time_slots[P].orders[W]=y.order,y.check_in_done!=null&&(g.value.time_slots[P].check_in_done+=y.check_in_done))})})},ve=async function(y,M){let P=[],K=!1;C.value.forEach(ee=>{if(ee.id==y.id){K=!0;return}});for(let ee of y.tickets)P.push(ee.order_item_id);const W={check_in:M,order_item_ids:P,location_permalink:o.filters.location};await l.checkInOrder(W).then(()=>{G(u.value),Z(v,{message:"Check-in registrato correttamente",error:!1}),K&&ye(C.value,u.value.order)}).catch(ee=>{B(v,ee)})},ze=async function(y,M){let P=[],K=!1;C.value.forEach(ee=>{if(ee.id==y.id){K=!0;return}});for(let ee of y.tickets)P.push(ee.order_item_id);const W={order_item_ids:P,no_show:M,location_permalink:o.filters.location.permalink};await l.noShowOrder(W).then(()=>{G(u.value),Z(v,{message:"No-show registrato correttamente",error:!1}),K&&ye(C.value,u.value.order)}).catch(ee=>{B(v,ee)})},qe=async function(y,M,P){const K={id:y,check_in:M,location_permalink:o.filters.location.permalink};await l.checkInTicket(K).then(()=>{Z(v,{message:"Check-in registrato correttamente",error:!1}),G(u.value),ye(C.value,u.value.order)}).catch(W=>{B(v,W)})},He=async function(y,M,P){const K={id:y,no_show:M,location_permalink:o.filters.location.permalink};await l.noShowTicket(K).then(()=>{Z(v,{message:"No-show registrato correttamente",error:!1}),G(u.value),ye(C.value,u.value.order)}).catch(W=>{B(v,W)})},ye=function(y,M){let P=Ke(C.value,u.value.order.id);P!=-1&&C.value.splice(P,1),C.value.push(u.value.order)},Ke=function(y,M){for(let P=0;P<y.length;P++)if(y[P].id===M)return P;return-1},Je=function(y){const M={course_name:y.course_name,start_at:y.start_at,date:o.filters.date,hour:y.start_at,max_seats:y.is_free_slot?null:y.remaing_seats+""};e.emit("updateFilters",M)},Ge=function(y){R.value=!0,F.value=y},We=function(y){G({order:y}),R.value=!1,z.value=!1},Qe=function(){H.value=!1,le()},Xe=function(y){return y!=null&&y.created_by&&(y==null?void 0:y.created_by)=="WEB"?"WEB":"KALATA"},Ze=function(y,M){let P=0;if(y&&y.tickets){y.tickets.forEach(W=>{M?W.no_show&&(P+=1):W.check_in&&(P+=1)});let K=y.tickets.length;if(P!=K&&P!=0)return P+"/"+K}},Ye=function(y,M){T.value.data=M,T.value.toggle(y)},$e=function(y,M){j.value=M.id;let P="Sei sicuro di voler eliminare questa prenotazione?";P+='<br><br> <i>N.B. Eventuali voucher presenti nella prenotazione vanno liberati manualmente dalla sezione "Data aperta"</i>',a.setDialog("Elimina prenotazione","Elimina","Annulla",P),a.setBtnSubmit(!1),a.setDynamicDialogVisibility(!0)},et=function(){if(r(),j.value){const y={id:j.value,location_permalink:o.filters.location.permalink};l.deleteOrder(y).then(()=>{_(),Z(v,{message:"La prenotazione è stata eliminata correttamente",error:!1}),g.value.time_slots&&g.value.time_slots.forEach((M,P)=>{M.orders.forEach((K,W)=>{K.id==j.value&&(g.value.time_slots[P].orders.splice(W,1),u.value,g.value.time_slots[P].check_in_done+=u.value.check_in_done,g.value.time_slots[P].confirmed_seats+=u.value.confirmed_seats,g.value.time_slots[P].remaing_seats-=u.value.confirmed_seats)})})}).catch(M=>{_(),B(v,M)})}},tt=function(y){S.value=y.data?[y.data]:[]},ot=function(y){C.value=y.data?[y.data]:[]},nt=function(y){ne.value=!0,c.value=y},lt=function(y){z.value=!0,c.value=y},at=function(y){H.value=!0,c.value=y},it=function(y){const M=new Map;M.set("id",y.id),M.set("location_permalink",o.filters.location.permalink),r(),l.downloadTicket(M).then(()=>{_()}).catch(P=>{_(),B(v,P)})},st=function(y,M){r(),Ce(y,M.location.permalink).then(()=>{_()}).catch(()=>{_()})},rt=function(y,M){r(),Se(y,M.location.permalink).then(()=>{_()}).catch(()=>{_()})},ct=async()=>{await le(),c.value&&c.value.id&&(await l.fetchOrderDetail(c.value.id),c.value={...l.getCurrentOrder})};return ae(m,y=>{y&&et()}),ae(o.filters,()=>{o.filters.location&&le()}),{dt:V,responseOrders:g,loading:L,totalRecords:d,lazyParams:O,currentOrder:c,status:p,expandedRows:S,expandedRows1:C,op:s,dialogStore:t,paymentList:k,visibleDialog:R,currentTimeSlot:F,visibleMenu:T,visibleDetailDialog:ne,visibleNotesDialog:z,toast:v,visibleAddNotesDialog:H,formattedDate:ie,loadLazyData:le,toggle:U,getProgressClass:I,showNotes:q,checkAll:ve,noShowAll:ze,openDialog:Je,checkInSingleTicket:qe,noShowSingleTicket:He,prettyPaymentStatus:Ee,openPaymentStatusDialog:Ge,onClosePaymentStatusDialog:We,getRowClass:Xe,printPDF:Se,showLabelCheckbox:Ze,confirmDeleteOrder:$e,showMenu:Ye,openOrderDetailDialog:nt,openNotesDialog:lt,downloadPDF:it,handleRowToggle:tt,handleRowToggle1:ot,openPDFTab:st,openPDFTicketTab:rt,onRefreshOrder:ct,openAddNotesDialog:at,onCloseNoteDialog:Qe,formatDataFromUnixTimestamps:Ct,printOrderPDF:Ce}},components:{PaymentStatusDialog:jt,OrderDetailDialog:ko,NotesDialog:Oo,AddNotesDialog:Ao}};const Po={class:"order-table"},No={class:""},jo={style:{width:"15rem"}},Fo={class:"m-0 text-right",style:{"font-size":"12px"}},Uo={key:0,class:"pi pi-exclamation-triangle cursor-pointer",style:{color:"var(--orange-400)"}},Eo={style:{width:"15rem"}},Ro={class:"m-0 text-right",style:{"font-size":"12px"}},Bo={key:0},Io=["onClick"],zo={key:0},qo={class:"flex justify-content-center"},Ho={class:"flex flex-column",style:{"margin-top":"8px"}},Ko={class:"text-sm",style:{"min-height":"15px"}},Jo={class:"flex justify-content-center"},Go={class:"flex flex-column",style:{"margin-top":"8px"}},Wo={class:"text-sm",style:{"min-height":"15px"}},Qo=["onClick"],Xo={class:"p-3"},Zo={class:"overlay-menu"},Yo=["onClick"],$o=["onClick"],en=["onClick"],tn=["onClick"],on=["onClick"],nn=["disabled","onClick"],ln=["disabled","onClick"],an={key:0},sn={key:1},rn={class:"flex justify-content-center"},cn={class:"flex justify-content-center"},dn={class:"flex justify-content-center"},un={key:0,class:"flex mx-4"};function mn(o,e,l,t,g,p){const a=b("Column"),m=b("ProgressBar"),k=b("Button"),u=b("Badge"),r=b("Checkbox"),_=b("OverlayPanel"),v=b("DataTable"),V=b("PaymentStatusDialog"),c=b("Dialog"),s=b("OrderDetailDialog"),F=b("NotesDialog"),j=b("AddNotesDialog"),L=pe("tooltip"),O=pe("badge");return f(),h("div",Po,[i(v,{value:t.responseOrders.time_slots,totalRecords:t.responseOrders.total,lazy:!0,paginator:!1,ref:"dt",loading:t.loading,stripedRows:"",expandedRows:t.expandedRows,"onUpdate:expandedRows":e[1]||(e[1]=d=>t.expandedRows=d),onRowExpand:t.handleRowToggle},{empty:D(()=>e[9]||(e[9]=[E(" Nessuna prenotazione trovata. ",-1)])),expansion:D(d=>[i(v,{value:d.data.orders,class:"m-4 mx-4 table-order-detail",expandedRows:t.expandedRows1,"onUpdate:expandedRows":e[0]||(e[0]=S=>t.expandedRows1=S),rowClass:t.getRowClass,onRowExpand:t.handleRowToggle1},{empty:D(()=>e[10]||(e[10]=[E(" Nessuna prenotazione trovata. ",-1)])),expansion:D(S=>[i(v,{value:S.data.tickets,class:"m-4 mx-5"},{default:D(()=>[i(a,{header:"Codice biglietto",field:"code"}),i(a,{header:"Tipo biglietto",field:"type"},{body:D(({data:C})=>[i(u,{value:C.ticket_name,class:J([C.ticket_name,"px-3 border-round-lg"])},null,8,["value","class"])]),_:1}),i(a,{header:"Prezzo"},{body:D(({data:C})=>[C.ticket_price?(f(),h("span",an," € "+x((+C.ticket_price).toFixed(2)),1)):(f(),h("span",sn,"-"))]),_:1}),i(a,null,{header:D(()=>e[20]||(e[20]=[n("div",{class:"flex justify-content-center w-full"},"Check-in",-1)])),body:D(({data:C})=>[n("div",rn,[i(r,{modelValue:C.check_in,"onUpdate:modelValue":R=>C.check_in=R,binary:!0,onChange:R=>t.checkInSingleTicket(C.id,C.check_in,S.data),class:"check_in"},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:2},1024),i(a,null,{header:D(()=>e[21]||(e[21]=[n("div",{class:"flex justify-content-center w-full"},"No-show",-1)])),body:D(({data:C})=>[n("div",cn,[i(r,{modelValue:C.no_show,"onUpdate:modelValue":R=>C.no_show=R,binary:!0,onChange:R=>t.noShowSingleTicket(C.id,C.no_show,S.data),class:"no_show"},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:2},1024),i(a,{field:"tickets_url"},{header:D(()=>e[22]||(e[22]=[n("div",{class:"flex justify-content-center w-full"},null,-1)])),body:D(({data:C})=>[n("div",dn,[de(i(k,{link:"",icon:"pi pi-print",href:C.tickets_url,target:"_blank",style:{color:"var(--surface-400)"},text:"",rounded:"",onClick:R=>t.openPDFTicketTab(C.id,l.filters)},null,8,["href","onClick"]),[[L,"Stampa",void 0,{top:!0}]])])]),_:1})]),_:2},1032,["value"])]),default:D(()=>[i(a,{header:"Codice",field:"reservation_number"}),i(a,{header:"Acquirente"},{body:D(({data:S})=>[E(x(S.user_name)+" "+x(S.user_surname)+" ",1),!S.user_name&&!S.user_surname?(f(),h("span",Bo,"-")):A("",!0)]),_:1}),i(a,{header:"Gruppo"},{body:D(({data:S})=>[n("div",{class:"group cursor-pointer",onClick:C=>t.showNotes(C,S.group_name)},x(S.group_name||"-"),9,Io)]),_:1}),i(a,{header:"Pagamento"},{body:D(({data:S})=>[S.status?(f(),h("span",zo,[i(u,{value:t.prettyPaymentStatus(S.status),class:J([S.status,"px-3 border-round-lg"])},null,8,["value","class"])])):A("",!0)]),_:1}),i(a,{header:"Q.ta",field:"tickets_number"}),i(a,null,{header:D(()=>e[11]||(e[11]=[n("div",{class:"flex justify-content-center w-full"},"Check-in",-1)])),body:D(({data:S})=>[n("div",qo,[n("div",Ho,[i(r,{modelValue:S.check_in,"onUpdate:modelValue":C=>S.check_in=C,binary:!0,onChange:C=>t.checkAll(S,S.check_in),class:"check_in"},null,8,["modelValue","onUpdate:modelValue","onChange"]),n("span",Ko,x(t.showLabelCheckbox(S,!1)),1)])])]),_:1}),i(a,null,{header:D(()=>e[12]||(e[12]=[n("div",{class:"flex justify-content-center w-full"},"No-show",-1)])),body:D(({data:S})=>[n("div",Jo,[n("div",Go,[i(r,{modelValue:S.no_show,"onUpdate:modelValue":C=>S.no_show=C,binary:!0,onChange:C=>t.noShowAll(S,S.no_show),class:"no_show"},null,8,["modelValue","onUpdate:modelValue","onChange"]),n("span",Wo,x(t.showLabelCheckbox(S,!0)),1)])])]),_:1}),i(a,{header:"Note"},{body:D(({data:S})=>[n("div",{class:"notes cursor-pointer",onClick:C=>t.showNotes(C,S.notes)},x(S.notes||"-"),9,Qo),i(_,{ref:"op"},{default:D(()=>[n("div",Xo,x(t.op.note),1)]),_:1},512)]),_:1}),i(a,{header:"",style:{"padding-right":"0",width:"4rem"}},{body:D(({data:S})=>[i(k,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-ellipsis-v",text:"",rounded:"",onClick:C=>t.showMenu(C,S)},null,8,["onClick"]),i(_,{ref:"visibleMenu"},{default:D(()=>[n("ul",Zo,[n("li",{onClick:C=>t.openOrderDetailDialog(t.visibleMenu.data)},e[13]||(e[13]=[n("i",{class:"pi pi-eye mr-3"},null,-1),E("Dettaglio ordine ",-1)]),8,Yo),n("li",{onClick:C=>t.openOrderDetailDialog(t.visibleMenu.data)},e[14]||(e[14]=[n("i",{class:"pi pi-shopping-cart mr-3"},null,-1),E("Dettaglio pagamento ",-1)]),8,$o),n("li",{onClick:C=>t.openPDFTab(t.visibleMenu.data,l.filters)},e[15]||(e[15]=[n("i",{class:"pi pi-print mr-3"},null,-1),E("Stampa ",-1)]),8,en),n("li",{onClick:C=>t.downloadPDF(t.visibleMenu.data)},e[16]||(e[16]=[n("i",{class:"pi pi-download mr-3"},null,-1),E("Scarica PDF ",-1)]),8,tn),n("li",{onClick:C=>t.openNotesDialog(t.visibleMenu.data)},e[17]||(e[17]=[n("i",{class:"pi pi-comment mr-3"},null,-1),E("Modifica nota ",-1)]),8,on),n("li",{disabled:!t.visibleMenu.data.can_change_status,onClick:C=>t.openPaymentStatusDialog(t.visibleMenu.data)},e[18]||(e[18]=[n("i",{class:"pi pi-pencil mr-3"},null,-1),E("Cambia stato ",-1)]),8,nn),n("li",{disabled:!t.visibleMenu.data.can_cancel,onClick:C=>t.confirmDeleteOrder(C,t.visibleMenu.data)},e[19]||(e[19]=[n("i",{class:"pi pi-trash mr-3"},null,-1),E("Elimina ",-1)]),8,ln)])]),_:2},1536)]),_:1}),i(a,{expander:"",class:"pl-0 ml-0"})]),_:2},1032,["value","expandedRows","rowClass","onRowExpand"]),d.data.orders&&d.data.orders.length>0?(f(),h("div",un,e[23]||(e[23]=[n("div",null,[n("div",{class:"p-0 m-0 flex align-items-center"},[n("p",{style:{width:"2rem",height:"5px"},class:"mr-2 web my-0"}),n("span",{class:"text-sm"},"WEB")]),n("div",{class:"p-0 m-0 flex align-items-center justify-content-between"},[n("p",{style:{width:"2rem",height:"5px"},class:"mr-2 kalata"}),n("span",{class:"text-sm"},"SUPERGA")])],-1)]))):A("",!0)]),default:D(()=>[i(a,{header:"Percorso",field:"course_name",filterMatchMode:"contains",ref:"course_name"},null,512),i(a,{header:"Orario",field:"start_at",filterMatchMode:"contains",ref:"start_at"},{body:D(({data:d})=>[n("div",No,[n("span",{class:J(d.is_free_slot?"free":"")},x(d.start_at),3)])]),_:1},512),i(a,{header:"Posti prenotati",ref:"availabe_tickets",field:"availabe_tickets"},{body:D(({data:d})=>[n("div",jo,[n("p",Fo,[E(x(d.confirmed_seats)+"/"+x(d.remaing_seats+d.confirmed_seats)+" ",1),d.confirmed_seats>d.remaing_seats+d.confirmed_seats?de((f(),h("i",Uo,null,512)),[[L,d.confirmed_seats-(d.remaing_seats+d.confirmed_seats)+" posti in overbooking",void 0,{top:!0}]]):A("",!0)]),i(m,{value:d.confirmed_seats*100/(d.remaing_seats+d.confirmed_seats),showValue:!1,style:{height:"10px"},class:J(["available-progress",t.getProgressClass(d.confirmed_seats,d.remaing_seats)])},null,8,["value","class"])])]),_:1},512),i(a,{header:"Check-in",ref:"confirmed_tickets",field:"confirmed_tickets"},{body:D(({data:d})=>[n("div",Eo,[n("p",Ro,x(d.check_in_done)+"/"+x(d.confirmed_seats),1),i(m,{value:d.check_in_done*100/(d.remaing_seats+d.confirmed_seats),showValue:!1,style:{height:"10px"},class:"check-in-progress"},null,8,["value"])])]),_:1},512),i(a,null,{body:D(({data:d})=>[de(i(k,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",class:J(["mr-2 text-primary",{"is-present":d.note&&d.note!==0}]),icon:"pi pi-comment",text:"",rounded:"",onClick:S=>t.openAddNotesDialog(d)},null,8,["class","onClick"]),[[L,"Nota",void 0,{top:!0}],[O,void 0,void 0,{danger:!0}]]),de(i(k,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-0 text-primary",icon:"pi pi-calendar",text:"",rounded:"",onClick:S=>t.openDialog(d)},null,8,["onClick"]),[[L,"Prenota",void 0,{top:!0}]])]),_:1}),i(a,{expander:"",style:{width:"5rem"}})]),_:1},8,["value","totalRecords","loading","expandedRows","onRowExpand"]),i(c,{visible:t.visibleDialog,"onUpdate:visible":e[3]||(e[3]=d=>t.visibleDialog=d),modal:"",header:"Stato pagamento",style:{width:"35rem"}},{default:D(()=>[i(V,{location_permalink:l.filters.location.permalink,time_slot:t.currentTimeSlot,onCloseDialog:e[2]||(e[2]=d=>t.onClosePaymentStatusDialog(d))},null,8,["location_permalink","time_slot"])]),_:1},8,["visible"]),i(c,{visible:t.visibleDetailDialog,"onUpdate:visible":e[4]||(e[4]=d=>t.visibleDetailDialog=d),modal:"",header:"Dettaglio ordine",style:{width:"70rem"},onAfterHide:t.loadLazyData},{default:D(()=>[i(s,{order:t.currentOrder},null,8,["order"])]),_:1},8,["visible","onAfterHide"]),i(c,{visible:t.visibleNotesDialog,"onUpdate:visible":e[6]||(e[6]=d=>t.visibleNotesDialog=d),modal:"",header:"Modifica nota",style:{width:"35rem"}},{default:D(()=>[i(F,{order:t.currentOrder,location_permalink:l.filters.location.permalink,onCloseDialog:e[5]||(e[5]=d=>t.onClosePaymentStatusDialog(d))},null,8,["order","location_permalink"])]),_:1},8,["visible"]),i(c,{visible:t.visibleAddNotesDialog,"onUpdate:visible":e[8]||(e[8]=d=>t.visibleAddNotesDialog=d),modal:"",header:"Nota",style:{width:"35rem"}},{default:D(()=>[i(j,{date:t.formattedDate,order:t.currentOrder,location_permalink:l.filters.location.permalink,onCloseDialog:e[7]||(e[7]=d=>t.onCloseNoteDialog(d))},null,8,["date","order","location_permalink"])]),_:1},8,["visible"])])}const fn=X(Mo,[["render",mn]]),pn={props:["filters"],setup(o,e){Y(()=>{v(),l.value=o.filters,l.value.date=new Date,s()});const l=w({}),t=_e(),g=oe(),p=$(),a=w([]),m=w(),k=ue.now().plus({years:1}),u=N(()=>t.allLocations),r=N(()=>g.getCalendar),_=async function(L){await g.fetchCalendar(L).then(()=>{}).catch(O=>{B(p,O)})},v=async function(){await t.fetchAllLocations().then(()=>{}).catch(L=>{B(p,L)})},V=function(){if(o.filters.location){const L=u.value.find(O=>O.permalink===o.filters.location);a.value=L.courses}},c=function(L){let O={};O.month=ue.fromJSDate(new Date(L)).month,O.year=ue.fromJSDate(new Date(L)).year,O.location_permalink=o.filters.location.permalink?o.filters.location.permalink:o.filters.location,m.value={month:O.month,year:O.year},_(O)},s=function(){let L=ue.now(),O={location_permalink:"",month:"",year:""};O.location_permalink=o.filters.location.permalink?o.filters.location.permalink:o.filters.location,O.month=L.month+"",O.year=L.year+"",_(O)},F=function(L){if(r.value.web_dates&&r.value.web_dates.length!=0){let O=L.month+1;O=O<10?"0"+O:O;let d=L.day<10?"0"+L.day:L.day,S=L.year+"-"+O+"-"+d;return r.value.web_dates.find(C=>C==S)}},j=function(L){let O={location_permalink:o.filters.location.permalink?o.filters.location.permalink:o.filters.location,month:L.month,year:L.year};_(O)};return ae(o.filters,()=>{if(m.value){let L={location_permalink:o.filters.location.permalink?o.filters.location.permalink:o.filters.location,month:m.value.month,year:m.value.year};_(L)}else s()}),{form:l,courses:a,maxAllowedDate:k,locations:u,calendar:r,getCourses:V,onDateChange:c,getDayFromDate:F,onMonthChange:j}}};const _n={class:"flex calendar-filter"},vn={key:0,class:"special-day"};function yn(o,e,l,t,g,p){const a=b("Calendar");return f(),h("div",_n,[i(a,{modelValue:t.form.date,"onUpdate:modelValue":e[0]||(e[0]=m=>t.form.date=m),inline:"",onDateSelect:e[1]||(e[1]=m=>t.onDateChange(m)),onMonthChange:e[2]||(e[2]=m=>t.onMonthChange(m)),maxDate:t.maxAllowedDate.toJSDate()},{date:D(m=>[t.getDayFromDate(m.date)?(f(),h("div",vn,[n("span",null,x(m.date.day),1)])):(f(),h(te,{key:1},[E(x(m.date.day),1)],64))]),_:1},8,["modelValue","maxDate"])])}const gn=X(pn,[["render",yn]]);class hn{static async fetchAll(e){const l=e.location_permalink;return delete e.location_permalink,(await Oe(`/ticket_office/${l}/search/courses`,e)).data}}const Ie=we({id:"course",state:()=>({course:{},courses:[],response_courses:{}}),getters:{allCourses:o=>o.response_courses.tickets,responseCourses:o=>o.response_courses,getTotalCourses:o=>o.response_courses?o.response_courses.total:0,getCurrentCourse:o=>o.course},actions:{async fetchAllCourses(o){await hn.fetchAll(o).then(e=>this.response_courses=e)}}}),bn={props:["filters"],setup(o,e){Y(()=>{l.value=Object.assign({},o.filters),l.value.date=ue.now().toFormat("dd/MM/yyyy"),a.value=Re(8,20),a.value.unshift("Tutti gli orari"),l.value.hour="Tutti gli orari",l.value.slot=[1]});const l=w({}),t=w([]),g=_e(),p=$(),a=w([]),m=w([{name:"Mattino",value:1},{name:"Pomeriggio",value:2},{name:"Sera",value:3}]),k=oe(),u=Ie(),r=N(()=>g.allLocations),_=N(()=>k.responseOrders),v=N(()=>u.allCourses),V=function(){l.value.name=null,l.value.course=t.value[0].name,l.value.hour=a.value[0],e.emit("onSubmit",l.value)},c=async function(){const s={location_permalink:l.value.location.permalink,api_version:"v2"};await u.fetchAllCourses(s).then(()=>{}).catch(F=>{B(p,F)})};return ae(r,()=>{o.filters.location&&r.value&&(l.value=Object.assign({},o.filters),l.value.hour||(l.value.hour="Tutti gli orari"),c())}),ae(o.filters,()=>{o.filters.location&&r.value&&l.value.location&&l.value.location!=o.filters.location&&(l.value=Object.assign({},o.filters),l.value.hour||(l.value.hour="Tutti gli orari"))}),ae(v,()=>{var s;t.value=Object.assign([],v.value),t.value&&((s=t.value[0])==null?void 0:s.id)!="-1"&&t.value.unshift({id:"-1",name:"Tutti i percorsi"}),l.value.course=t.value[0].name}),{form:l,courses:t,hours:a,options:m,locations:r,responseOrders:_,resetField:V}}},kn={class:"formgrid grid px-0 align-items-center"},Cn={key:0,class:"field col-4 flex flex-column"},wn={key:1,class:"field col-3 flex flex-column"},xn={key:2,class:"field col-3 flex flex-column"},Dn={class:"field col-4 flex flex-column"},On={class:"field col-3 flex flex-column"},Sn={class:"flex col-12 justify-content-end pt-1"};function Vn(o,e,l,t,g,p){const a=b("Dropdown"),m=b("SelectButton"),k=b("InputText"),u=b("Button"),r=b("AccordionTab"),_=b("Accordion");return f(),Q(_,{activeIndex:0},{default:D(()=>[i(r,{header:"FILTRI"},{default:D(()=>[n("div",kn,[t.form.location&&t.courses?(f(),h("div",Cn,[e[7]||(e[7]=n("label",{for:"typology"},"Filtra per percorso",-1)),i(a,{modelValue:t.form.course,"onUpdate:modelValue":e[0]||(e[0]=v=>t.form.course=v),options:t.courses,optionLabel:"name",optionValue:"name",placeholder:""},null,8,["modelValue","options"])])):A("",!0),t.responseOrders?(f(),h("div",wn,[e[8]||(e[8]=n("label",{for:"typology"},"Filtra per orario",-1)),i(m,{modelValue:t.form.slot,"onUpdate:modelValue":e[1]||(e[1]=v=>t.form.slot=v),options:t.options,optionLabel:"name",multiple:"","aria-labelledby":"multiple"},null,8,["modelValue","options"])])):A("",!0),t.responseOrders?(f(),h("div",xn,[e[9]||(e[9]=n("label",{for:"typology"},"Filtra per orario (dalle)",-1)),i(a,{modelValue:t.form.hour,"onUpdate:modelValue":e[2]||(e[2]=v=>t.form.hour=v),options:t.hours,placeholder:""},null,8,["modelValue","options"])])):A("",!0),e[12]||(e[12]=n("div",{class:"col-12"},null,-1)),n("div",Dn,[e[10]||(e[10]=n("label",{for:"typology"},"Filtra per acquirente",-1)),i(k,{modelValue:t.form.name,"onUpdate:modelValue":e[3]||(e[3]=v=>t.form.name=v),placeholder:""},null,8,["modelValue"])]),n("div",On,[e[11]||(e[11]=n("label",{for:"typology"},"Filtra per gruppo",-1)),i(k,{modelValue:t.form.group,"onUpdate:modelValue":e[4]||(e[4]=v=>t.form.group=v),placeholder:""},null,8,["modelValue"])])]),n("div",Sn,[i(u,{label:"Ricerca",class:"mr-2",onClick:e[5]||(e[5]=v=>o.$emit("onSubmit",t.form))}),i(u,{label:"Annulla",class:"p-button-outlined",onClick:e[6]||(e[6]=v=>t.resetField())})])]),_:1})]),_:1})}const Ln=X(bn,[["render",Vn]]),Tn={props:["form","price","index","ticket"],setup(o,e){const l=w(0),t=function(){l.value++,p()},g=function(){l.value>0&&l.value--,p()},p=function(){l.value==null&&(l.value=0);const a={counter:l.value,price:o.price,index:o.index,ticket:o.ticket};e.emit("changeCounter",a)};return{counter:l,decrement:g,increment:t,emitEvent:p}}};const An={class:"btn-plus-min flex align-items-center"},Mn={class:"counter"};function Pn(o,e,l,t,g,p){const a=b("Button"),m=b("InputNumber");return f(),h("div",An,[i(a,{icon:"pi pi-minus",rounded:"",outlined:"",severity:"secondary",onClick:t.decrement,disabled:t.counter===0},null,8,["onClick","disabled"]),n("div",Mn,[i(m,{modelValue:t.counter,"onUpdate:modelValue":[e[0]||(e[0]=k=>t.counter=k),e[1]||(e[1]=k=>t.emitEvent())],min:0},null,8,["modelValue"])]),i(a,{icon:"pi pi-plus",rounded:"",outlined:"",severity:"secondary",onClick:t.increment},null,8,["onClick"])])}const Nn=X(Tn,[["render",Pn]]),jn={props:["tickets","form"],setup(o,e){Y(()=>{g.value=!1,a.discount={},p.value=null,o.form.max_seats&&o.form.max_seats<0?(u.value=!0,r.value=-o.form.max_seats):u.value=!1});const l=w(0),t=w([]),g=w(!1),p=w(),a=oe(),m=$(),k=w(!1),u=w(!1),r=w(),_=N(()=>a.getDiscount),v=function(j){t.value[j.index]={partial_total:j.price*j.counter,ticket:j.ticket,quantity:j.counter},l.value=0;let L=0;t.value.forEach(O=>{l.value+=O.partial_total,L+=O.quantity}),u.value||(o.form.max_seats&&L>+o.form.max_seats?(r.value=L-+o.form.max_seats,k.value=!0):(r.value=null,k.value=!1)),p.value&&c()},V=function(){c()},c=async function(){let j=[];t.value.forEach(O=>{j.push({id:O.ticket.id,quantity:O.quantity})});const L={discount_code:p.value,location_permalink:o.form.location_permalink,tickets:j};await a.cost(L).then(()=>{}).catch(O=>{B(m,O)})};return{total:l,partialTotals:t,showDiscount:g,discountCode:p,discount:_,showAlert:k,showAlert2:u,numOverbooking:r,onChangeCounter:v,applyDiscount:V,checkDisabled:function(){let j=!1;(!t.value||t.value.length==0)&&(j=!0);let L=0;return t.value.forEach(O=>{L+=O.quantity}),L==0&&(j=!0),e.emit("disableSecondoTab",!0),j},nextTab:function(){const j={discount_code:p.value,partial_total:t.value};e.emit("nextTab",j)}}},components:{PlusMinusButton:Nn}};const Fn={key:0},Un={key:1},En={key:0},Rn={key:1},Bn={key:0,class:"flex justify-content-between align-items-center"},In={class:"flex align-items-center col-9"},zn={class:"col-7 pl-0"},qn={class:"text-right col-2"},Hn={class:"col-3 flex justify-content-end"},Kn={key:2,class:"mt-3 mb-5"},Jn={class:"flex align-items-center justify-content-between py-0"},Gn={class:"col-9 flex"},Wn={class:"col-2 text-right font-bold"},Qn={class:"col-3 flex justify-content-end"};function Xn(o,e,l,t,g,p){const a=b("Message"),m=b("PlusMinusButton"),k=b("Button");return f(),h(te,null,[t.showAlert?(f(),Q(a,{key:0,severity:"warn",closable:!1},{default:D(()=>[E("Attenzione! Si sta andando in overbooking di "+x(t.numOverbooking)+" ",1),t.numOverbooking==1?(f(),h("span",Fn,"posto")):(f(),h("span",Un,"posti"))]),_:1})):A("",!0),t.showAlert2?(f(),Q(a,{key:1,severity:"warn",closable:!1},{default:D(()=>[E("Attenzione! Lo slot orario è già in overbooking di "+x(t.numOverbooking)+" ",1),t.numOverbooking==1?(f(),h("span",En,"posto")):(f(),h("span",Rn,"posti"))]),_:1})):A("",!0),(f(!0),h(te,null,he(l.tickets,(u,r)=>{var _,v,V;return f(),h("div",{key:u.id},[((_=u.course)==null?void 0:_.id)==((v=l.form.course)==null?void 0:v.id)?(f(),h("div",Bn,[n("div",In,[n("b",zn,x(u.name),1),n("div",qn,"€ "+x((V=u.price)==null?void 0:V.toFixed(2)),1)]),n("div",Hn,[i(m,{onChangeCounter:e[0]||(e[0]=c=>t.onChangeCounter(c)),price:u.price,index:r,ticket:u},null,8,["price","index","ticket"])])])):A("",!0)])}),128)),l.tickets&&l.tickets.length==0?(f(),h("div",Kn,e[2]||(e[2]=[n("i",null,"Nessuna tipologia di biglietto trovata.",-1)]))):A("",!0),e[4]||(e[4]=n("hr",{class:"mt-3"},null,-1)),n("div",Jn,[n("div",Gn,[n("div",{class:J(["pl-0",t.discount&&t.discount.total_amount?"col-2":"col-7"])},e[3]||(e[3]=[n("b",null,"Totale",-1)]),2),n("div",Wn,"€ "+x(t.total.toFixed(2)),1)]),n("div",Qn,[i(k,{label:"Prosegui",onClick:e[1]||(e[1]=u=>t.nextTab()),disabled:t.checkDisabled()},null,8,["disabled"])])])],64)}const Zn=X(jn,[["render",Xn]]);class Yn{static async fetchAll(){return(await Fe("/countries")).data.countries}}const $n=we({id:"country",state:()=>({country:{},countries:[]}),getters:{allCountries:o=>o.countries},actions:{async fetchAllCountries(){await Yn.fetchAll().then(o=>this.countries=o)}}});class el{static async fetchAll(){return(await Fe("/provinces")).data.provinces}}const tl=we({id:"province",state:()=>({province:{},provinces:[]}),getters:{allProvinces:o=>o.provinces,getCurrentProvince:o=>o.province},actions:{async fetchAllProvinces(){await el.fetchAll().then(o=>this.provinces=o)}}}),ol={computed:{Code(){return Code}},props:["location_permalink"],setup(o,e){Y(()=>{L(),O()});const l=xe(),t=$n(),g=oe(),p=tl(),a=w({}),m=w(),k=w(),u=w(),r=w(),_=N(()=>t.allCountries),v=N(()=>l.allOpenTickets),V=N(()=>g.paymentStatus),c=N(()=>g.paymentModeList),s=N(()=>p.allProvinces),F=N(()=>{const R=g.getPaymentMethods;return Object.entries(R).map(([ne,T])=>({id:ne,label:T}))}),j=N(()=>g.paymentMethodAccountList),L=async function(){await t.fetchAllCountries().then(()=>{a.value.country_id=88,a.value.status={id:"payed",name:"Pagato"}})},O=async function(){await p.fetchAllProvinces()},d=async function(R){const ne={code:R.query.toUpperCase(),location_permalink:o.location_permalink};await l.fetchAllOpenTickets(ne)},S=function(){a.value.status.id&&(a.value.status.id=="free"||a.value.status.id=="to_pay")&&(a.value.payment_method=null)},C=function(){if(a.value.status&&a.value.status.id=="payed"&&a.value.open_ticket_codes){for(const R of a.value.open_ticket_codes)if(R.expired){k.value="Uno o più codici biglietto risultano scaduti";return}}if(!(a.value.amount&&(a.value.payment_method_deposit||(m.value="Seleziona un metodo di pagamento"),a.value.paid_at||(u.value="Inserisci la data di versamento dell'acconto"),m.value||u.value))){if(!a.value.payment_method&&a.value.status.id!="free"&&a.value.status.id!="to_pay"){r.value="Seleziona un metodo di pagamento";return}e.emit("nextTab",a.value)}};return ae(()=>a.value.multi_payment,R=>{R&&(a.value.status={id:"to_pay",name:"Da pagare"})}),{form:a,countries:_,paymentList:V,paymentModeList:c,errorMessage:m,errorMessageVoucher:k,errorMessageDate:u,errorPaymentMethod:r,open_tickets:v,provinces:s,dynamicPaymentMethods:F,paymentMethodAccountList:j,fetchAllOpenTickets:d,onChangeStatus:S,onConfirm:C}}};const nl={key:0,class:"formgrid grid"},ll={class:"field col-6"},al={class:"field col-6"},il={class:"field col-6"},sl={class:"field col-6"},rl={class:"field col-6"},cl={class:"field col-6"},dl={class:"field col-6"},ul={class:"field col-6"},ml={key:0,class:"field col-6"},fl={class:"p-float-label mb-0"},pl={class:"p-error",id:"dd-error"},_l={key:1,class:"field col-6 flex flex-column"},vl={key:0,class:"pi pi-exclamation-triangle",style:{color:"#ff6767"}},yl={class:"p-error",id:"dd-error"},gl={class:"field col-12"},hl={key:2,class:"col-12 pl-0 flex flex-wrap"},bl={class:"field col-6 mb-0"},kl={class:"field col-6 mb-0"},Cl={class:"p-float-label mb-0"},wl={class:"p-error",id:"dd-error"},xl={class:"field col-6"},Dl={class:"p-error",id:"dd-error"},Ol={class:"field col-12"},Sl={class:"field flex flex-column"},Vl={class:"col-12 flex justify-content-end"};function Ll(o,e,l,t,g,p){const a=b("InputText"),m=b("Dropdown"),k=b("AutoComplete"),u=b("Checkbox"),r=b("InputNumber"),_=b("Calendar"),v=b("Textarea"),V=b("Button"),c=pe("tooltip");return t.form?(f(),h("div",nl,[n("div",ll,[e[22]||(e[22]=n("label",{for:"user_name"},"Nome",-1)),i(a,{type:"text",modelValue:t.form.user_name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.form.user_name=s),class:"w-full"},null,8,["modelValue"])]),n("div",al,[e[23]||(e[23]=n("label",{for:"user_surname"},"Cognome",-1)),i(a,{type:"text",modelValue:t.form.user_surname,"onUpdate:modelValue":e[1]||(e[1]=s=>t.form.user_surname=s),class:"w-full"},null,8,["modelValue"])]),n("div",il,[e[24]||(e[24]=n("label",{for:"user_surname"},"Nome gruppo",-1)),i(a,{type:"text",modelValue:t.form.group_name,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.group_name=s),class:"w-full"},null,8,["modelValue"])]),n("div",sl,[e[25]||(e[25]=n("label",{for:"user_email"},"Email",-1)),i(a,{type:"text",modelValue:t.form.user_email,"onUpdate:modelValue":e[3]||(e[3]=s=>t.form.user_email=s),class:"w-full"},null,8,["modelValue"])]),n("div",rl,[e[26]||(e[26]=n("label",{for:"user_phone"},"Telefono",-1)),i(a,{type:"text",modelValue:t.form.user_phone,"onUpdate:modelValue":e[4]||(e[4]=s=>t.form.user_phone=s),class:"w-full"},null,8,["modelValue"])]),n("div",cl,[e[27]||(e[27]=n("label",{for:"country_id"},"Nazione",-1)),i(m,{modelValue:t.form.country_id,"onUpdate:modelValue":e[5]||(e[5]=s=>t.form.country_id=s),options:t.countries,optionLabel:"name",optionValue:"id",class:"w-full"},null,8,["modelValue","options"])]),n("div",dl,[e[28]||(e[28]=n("label",{for:"province"},"Provincia",-1)),i(m,{modelValue:t.form.user_zip,"onUpdate:modelValue":e[6]||(e[6]=s=>t.form.user_zip=s),options:t.provinces,optionLabel:"name",optionValue:"name",class:"w-full"},null,8,["modelValue","options"])]),n("div",ul,[e[29]||(e[29]=n("label",{for:"status"},"Stato pagamento",-1)),i(m,{modelValue:t.form.status,"onUpdate:modelValue":e[7]||(e[7]=s=>t.form.status=s),options:t.paymentList,optionLabel:"name",class:"w-full mb-0",onChange:e[8]||(e[8]=s=>t.onChangeStatus())},null,8,["modelValue","options"])]),t.form.status&&t.form.status.id=="payed"?(f(),h("div",ml,[e[30]||(e[30]=n("label",{for:"payment_method"},"Modalità pagamento*",-1)),n("span",fl,[i(m,{modelValue:t.form.payment_method,"onUpdate:modelValue":e[9]||(e[9]=s=>t.form.payment_method=s),options:t.dynamicPaymentMethods,optionLabel:"label",class:J(["w-full",{"p-invalid":t.errorPaymentMethod}]),disabled:t.form.status&&t.form.status.id!="payed",onChange:e[10]||(e[10]=s=>t.errorPaymentMethod=null)},null,8,["modelValue","options","disabled","class"])]),n("small",pl,x(t.errorPaymentMethod||" "),1)])):A("",!0),t.form.payment_method&&t.form.payment_method.id=="voucher"?(f(),h("div",_l,[e[31]||(e[31]=n("label",{for:"user_zip"},"Codice biglietto",-1)),i(k,{modelValue:t.form.open_ticket_codes,"onUpdate:modelValue":e[11]||(e[11]=s=>t.form.open_ticket_codes=s),suggestions:t.open_tickets,class:J(["uppercase w-full",{"p-invalid":t.errorMessageVoucher}]),onComplete:e[12]||(e[12]=s=>t.fetchAllOpenTickets(s)),emptySearchMessage:"Nessun risultato",emptySelectionMessage:"Nessun risultato",optionLabel:"code",optionValue:"code",multiple:"",onChange:e[13]||(e[13]=s=>t.errorMessageVoucher=null)},{option:D(({option:s})=>[n("span",{class:"flex flex-row justify-content-between",style:Ne({color:s.expired?"#ff6767":null})},[E(x(s.code)+" ",1),s.expired?de((f(),h("i",vl,null,512)),[[c,"Scaduto"]]):A("",!0)],4)]),_:1},8,["modelValue","suggestions","class"]),n("small",yl,x(t.errorMessageVoucher||" "),1)])):A("",!0),n("div",gl,[i(u,{modelValue:t.form.multi_payment,"onUpdate:modelValue":e[14]||(e[14]=s=>t.form.multi_payment=s),binary:!0,class:"deposit"},null,8,["modelValue"]),e[32]||(e[32]=n("label",{for:"payment_method",class:"text-sm ml-2"},"Acconto",-1))]),e[37]||(e[37]=n("div",{class:"field col-6"},null,-1)),t.form.multi_payment?(f(),h("div",hl,[n("div",bl,[e[33]||(e[33]=n("label",{for:"deposit"},"Importo acconto",-1)),i(r,{modelValue:t.form.amount,"onUpdate:modelValue":e[15]||(e[15]=s=>t.form.amount=s),inputId:"currency-germany",mode:"currency",currency:"EUR",locale:"it-IT",class:"w-full"},null,8,["modelValue"])]),n("div",kl,[e[34]||(e[34]=n("label",{for:"payment_method_deposit"},"Modalità pagamento*",-1)),n("span",Cl,[i(m,{modelValue:t.form.payment_method_deposit,"onUpdate:modelValue":e[16]||(e[16]=s=>t.form.payment_method_deposit=s),options:t.dynamicPaymentMethods,optionLabel:"label",class:J(["w-full",{"p-invalid":t.errorMessage}]),onChange:e[17]||(e[17]=s=>t.errorMessage=null)},null,8,["modelValue","options","class"])]),n("small",wl,x(t.errorMessage||" "),1)]),n("div",xl,[e[35]||(e[35]=n("label",{for:"deposit"},"Data versamento acconto*",-1)),i(_,{modelValue:t.form.paid_at,"onUpdate:modelValue":e[18]||(e[18]=s=>t.form.paid_at=s),class:J(["w-full",{"p-invalid":t.errorMessageDate}]),onChange:e[19]||(e[19]=s=>t.errorMessageDate=null)},null,8,["modelValue","class"]),n("small",Dl,x(t.errorMessageDate||" "),1)])])):A("",!0),n("div",Ol,[n("div",Sl,[e[36]||(e[36]=n("label",{for:"notes"},"Note",-1)),i(v,{modelValue:t.form.notes,"onUpdate:modelValue":e[20]||(e[20]=s=>t.form.notes=s),rows:"5",cols:"30"},null,8,["modelValue"])])]),n("div",Vl,[i(V,{label:"Conferma",onClick:e[21]||(e[21]=s=>t.onConfirm())})])])):A("",!0)}const Tl=X(ol,[["render",Ll],["__scopeId","data-v-12708015"]]);var Al={root:function(e){var l=e.instance;return["p-contextmenu p-component",{"p-ripple-disabled":l.$primevue.config.ripple===!1}]},menu:"p-contextmenu-root-list",menuitem:function(e){var l=e.instance,t=e.processedItem;return["p-menuitem",{"p-menuitem-active p-highlight":l.isItemActive(t),"p-focus":l.isItemFocused(t),"p-disabled":l.isItemDisabled(t)}]},content:"p-menuitem-content",action:"p-menuitem-link",icon:"p-menuitem-icon",label:"p-menuitem-text",submenuIcon:"p-submenu-icon",submenu:"p-submenu-list",separator:"p-menuitem-separator"};je.extend({name:"contextmenu",classes:Al});const Ml={props:["form"],setup(o,e){Y(()=>{s()});const l=w(0),t=w([]),g=w(!1),p=w(!0),a=w(),m=w([]),{showLoader:k,hideLoader:u}=me(),r=xe(),_=oe(),v=$(),V=N(()=>r.allTickets),c=N(()=>_.getCurrentOrder),s=async function(){const T={location_permalink:o.form.location_permalink,api_version:"v2",date:j(o.form.date),course_id:o.form.course.id};await r.fetchAllTickets(T).then(()=>{}).catch(z=>{B(v,z)})},F=function(T){l.value+=1,a.value=T.discount_code,t.value=Object.assign([],T.partial_total),p.value=!1},j=function(T){return ke(T).includes("Invalid")?be(T):ke(T)},L=function(T){O(T)},O=async function(T){var le,re,U,I;k();const z=[{start_at:o.form.hour,tickets:[]}];t.value.forEach(q=>{q.quantity!=0&&z[0].tickets.push({id:q.ticket.id,quantity:q.quantity})});let H=[];T.open_ticket_codes&&T.open_ticket_codes.forEach(q=>{H.push(q.code)});const ie={location_permalink:o.form.location_permalink,country_id:T.country_id,status:T.status.id,group_name:T.group_name,user_email:T.user_email,user_name:T.user_name,user_phone:T.user_phone,user_surname:T.user_surname,user_zip:T.user_zip,api_version:"v2",date:o.form.date?j(o.form.date):"",notes:T.notes,time_slots:z,payment_method:((le=T.payment_method)==null?void 0:le.id)||null,course_id:(U=(re=o.form)==null?void 0:re.course)==null?void 0:U.id,open_ticket_codes:H,multi_payment:T.multi_payment,payments:[]};T.multi_payment&&(T.amount&&T.payment_method_deposit?ie.payments=[{amount:T.amount,typology:"deposit",payment_method:(I=T.payment_method_deposit)==null?void 0:I.id,paid_at:be(T.paid_at)}]:ie.payments=[]),a.value&&(ie.discount_code=a.value),await _.createOrder(ie).then(()=>{l.value+=1,p.value=!0,g.value=!0,u()}).catch(q=>{u(),B(v,q)})},d=function(){Ce(c==null?void 0:c.value,o.form.location_permalink),e.emit("closeDialog",!0)},S=function(T){p.value=T},C=function(){Ce(c==null?void 0:c.value,o.form.location_permalink),R()},R=async function(){let T=[];if(!c.value&&!o.form.location_permalink)return;for(let H of c.value.tickets)T.push(H.order_item_id);const z={check_in:!0,order_item_ids:T,location_permalink:o.form.location_permalink};await _.checkInOrder(z).then(()=>{Z(v,{message:"Check-in registrato correttamente",error:!1}),e.emit("closeDialog",!0)}).catch(H=>{B(v,H)})},ne=function(){k();const T={location_permalink:o.form.location_permalink,order_id:c.value.id};_.sendEmail(T).then(()=>{Z(v,{message:"Email inviata correttamente al cliente",error:!1}),u(),e.emit("closeDialog",!0)}).catch(z=>{u(),B(v,z)})};return ae(c,()=>{m.value=[],c.value.tickets.forEach(T=>{const z=m.value.find(H=>H.ticket_name===T.ticket_name);if(!z)T.quantity=1,m.value.push(T);else{let H=m.value.indexOf(z);m.value[H].quantity+=1}})}),{tickets:V,active:l,partialTotals:t,showOrderDetail:g,currentOrder:c,tmp_tickets:m,showSecondTab:p,formatExplicitDate:Ue,formatDate:Ve,onNextTab:F,onConfirmPayment:L,printPDF:Se,onPrintPDF:d,onDisableSecondoTab:S,printAndCheckIn:C,sendEmail:ne}},components:{NewOrderTicketTab:Zn,NewOrderFormTab:Tl}};const Pl={key:0,class:"info-box"},Nl={class:"font-medium"},jl={class:"font-medium"},Fl={key:0,class:"capitalize"},Ul={key:0,class:"flex pb-4"},El={class:"flex flex-column"},Rl={key:0,class:"pb-1 pr-1"},Bl={key:1,class:"pb-1"},Il={class:"py-5"},zl={class:"m-0 text-center line-height-3"},ql={key:0,class:"col-offset-3 col-6 flex justify-content-center flex-column align-items-center mt-4 order-summary"},Hl={class:"flex flex-column col-12"},Kl={key:0,class:"pb-1",style:{"min-width":"8rem"}},Jl={key:1,class:"pb-1"},Gl={key:2},Wl={class:"flex flex-column col-12"},Ql={key:0,class:"p-0 m-0 font-medium flex justify-content-between"},Xl={class:"pb-1"},Zl={class:"flex align-items-center justify-content-center mt-4"};function Yl(o,e,l,t,g,p){var _,v;const a=b("NewOrderTicketTab"),m=b("TabPanel"),k=b("NewOrderFormTab"),u=b("Button"),r=b("TabView");return f(),h(te,null,[l.form?(f(),h("div",Pl,[n("p",Nl,[e[7]||(e[7]=n("i",{class:"pi pi-map-marker mr-3 font-medium"},null,-1)),E(x((_=l.form.course)==null?void 0:_.name),1)]),n("p",jl,[e[8]||(e[8]=n("i",{class:"pi pi-calendar mr-3 font-medium"},null,-1)),l.form.date?(f(),h("span",Fl,x(t.formatDate((v=l.form)==null?void 0:v.date)),1)):A("",!0),E(" - "+x(l.form.hour),1)]),t.partialTotals&&t.partialTotals.length>0?(f(),h("div",Ul,[e[9]||(e[9]=n("i",{class:"pi pi-ticket mr-3 font-medium mt-1"},null,-1)),n("div",El,[(f(!0),h(te,null,he(t.partialTotals,V=>{var c;return f(),h("p",{class:"p-0 m-0 font-medium flex justify-content-between",key:V},[V&&V.quantity!=0?(f(),h("span",Rl,x((c=V.ticket)==null?void 0:c.name),1)):A("",!0),V&&V.quantity!=0?(f(),h("span",Bl," x "+x(V.quantity)+" "+x(V.price),1)):A("",!0)])}),128))])])):A("",!0)])):A("",!0),i(r,{activeIndex:t.active,"onUpdate:activeIndex":e[6]||(e[6]=V=>t.active=V)},{default:D(()=>[i(m,{header:"Seleziona i biglietti",disabled:t.showOrderDetail},{default:D(()=>[i(a,{tickets:t.tickets,form:l.form,onNextTab:e[0]||(e[0]=V=>t.onNextTab(V)),onDisableSecondoTab:e[1]||(e[1]=V=>t.onDisableSecondoTab(V))},null,8,["tickets","form"])]),_:1},8,["disabled"]),i(m,{header:"Inserisci i dati",disabled:t.showSecondTab},{default:D(()=>[i(k,{onNextTab:e[2]||(e[2]=V=>t.onConfirmPayment(V)),location_permalink:l.form.location_permalink},null,8,["location_permalink"])]),_:1},8,["disabled"]),t.showOrderDetail?(f(),Q(m,{key:0,header:"Ordine completato"},{default:D(()=>{var V,c;return[n("div",Il,[n("div",zl,[e[10]||(e[10]=E(" Ordine ",-1)),n("b",null,x(t.currentOrder.reservation_number),1),e[11]||(e[11]=E(" registrato correttamente!",-1)),e[12]||(e[12]=n("br",null,null,-1))]),t.currentOrder?(f(),h("div",ql,[e[14]||(e[14]=n("p",{class:"my-2"},[n("b",null,"Riepilogo ordine:")],-1)),n("div",Hl,[(f(!0),h(te,null,he(t.tmp_tickets,s=>(f(),h("p",{class:"p-0 m-0 font-medium flex justify-content-between flex-1",key:s},[s&&s.quantity!=0?(f(),h("span",Kl,x(s.ticket_name),1)):A("",!0),s&&s.quantity!=0?(f(),h("span",Jl," x "+x(s.quantity),1)):A("",!0),s.ticket_price?(f(),h("span",Gl," € "+x((+s.ticket_price).toFixed(2)),1)):A("",!0)]))),128))]),n("div",Wl,[t.currentOrder.total?(f(),h("p",Ql,[e[13]||(e[13]=n("span",{class:"pb-1 pr-1"},"Totale ordine ",-1)),n("span",Xl,[n("b",null,"€ "+x((+((V=t.currentOrder)==null?void 0:V.total)).toFixed(2)),1)])])):A("",!0)])])):A("",!0),n("div",Zl,[i(u,{icon:"pi pi-envelope",class:"mr-3",rounted:"",outlined:"",label:"Invia biglietti",onClick:e[3]||(e[3]=s=>t.sendEmail()),disable:!((c=t.currentOrder)!=null&&c.user_email)},null,8,["disable"]),i(u,{icon:"pi pi-print",onClick:e[4]||(e[4]=s=>t.onPrintPDF()),class:"mr-3",rounted:"",outlined:"",label:"Stampa"}),i(u,{icon:"pi print-check-icon",onClick:e[5]||(e[5]=s=>t.printAndCheckIn()),class:"mr-3",rounted:"",outlined:"",label:"Stampa e Check-in"})])])]}),_:1})):A("",!0)]),_:1},8,["activeIndex"])],64)}const $l=X(Ml,[["render",Yl]]),ea={props:["filters","date"],setup(o,e){Y(()=>{p.value=Re(8,24),l.value=Object.assign({},o.filters)});const l=w({}),t=Ie(),g=$(),p=w(),a=w(!1),m=Le(),k=w(!1),u=N(()=>t.allCourses),r=N(()=>m.showNewOrderDialog),_=async function(){const s={location_permalink:o.filters.location_permalink,api_version:"v2"};await t.fetchAllCourses(s).catch(F=>{B(g,F)})},v=function(){m.setNewOrderDialogVisibility(!1),l.value.hour="",l.value.course=null,e.emit("onCloseDialog")},V=function(s){l.value.date=o.date,m.setNewOrderDialogVisibility(s)},c=function(){k.value=l.value.open_ticket};return ae(o.filters,()=>{if(_(),l.value=Object.assign({},o.filters),o.filters.course&&!o.filters.course.id){let s=u.value.find(F=>F.name===o.filters.course.name);s&&(l.value.course=s)}}),{courses:u,form:l,hours:p,disableForm:k,visible:a,onCloseDialog:v,updateDialog:V,onChecked:c,dialogVisible:r,dialogStore:m}},components:{NewOrderDialog:$l}},ta={class:"formgrid grid px-0 align-items-center mt-4"},oa={key:0,class:"field flex flex-column w-full col-12"},na={key:1,class:"field flex flex-column w-full col-12"},la={class:"flex justify-content-end align-items-center mt-2"},aa={class:"flex align-items-center justify-content-between w-full"};function ia(o,e,l,t,g,p){const a=b("Dropdown"),m=b("Button"),k=b("NewOrderDialog"),u=b("Dialog"),r=b("Card");return f(),Q(r,{class:"mt-4"},{content:D(()=>[e[10]||(e[10]=n("h2",{class:"mt-1"},"Nuova prenotazione",-1)),n("div",ta,[l.filters.location_permalink?(f(),h("div",oa,[e[7]||(e[7]=n("label",{for:"typology"},"Scegli il percorso",-1)),i(a,{modelValue:t.form.course,"onUpdate:modelValue":e[0]||(e[0]=_=>t.form.course=_),options:t.courses,optionLabel:"name",disabled:t.disableForm,placeholder:""},null,8,["modelValue","options","disabled"])])):A("",!0),l.filters.location_permalink?(f(),h("div",na,[e[8]||(e[8]=n("label",{for:"typology"},"Seleziona l'orario",-1)),i(a,{modelValue:t.form.hour,"onUpdate:modelValue":e[1]||(e[1]=_=>t.form.hour=_),options:t.hours,disabled:t.disableForm,placeholder:""},null,8,["modelValue","options","disabled"])])):A("",!0)]),n("div",la,[i(m,{label:"Prenota",disabled:!t.form.course||!t.form.hour,onClick:e[2]||(e[2]=_=>t.updateDialog(!0))},null,8,["disabled"])]),i(u,{visible:t.dialogVisible,"onUpdate:visible":e[5]||(e[5]=_=>t.dialogVisible=_),modal:"",header:"Nuova prenotazione",style:{width:"60rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},closable:!1,onHide:e[6]||(e[6]=_=>t.onCloseDialog())},{header:D(()=>[n("div",aa,[e[9]||(e[9]=n("h2",null,"Nuova prenotazione",-1)),i(m,{icon:"pi pi-times",text:"",rounded:"",onClick:e[3]||(e[3]=_=>t.updateDialog(!1))})])]),default:D(()=>[i(k,{form:t.form,onCloseDialog:e[4]||(e[4]=_=>t.onCloseDialog())},null,8,["form"])]),_:1},8,["visible"])]),_:1})}const sa=X(ea,[["render",ia]]),ra={props:["location_permalink"],setup(o,e){Y(()=>{t.value.start_date=ue.local().startOf("day").toFormat("dd/MM/yyyy"),t.value.end_date=ue.local().endOf("day").toFormat("dd/MM/yyyy"),t.value.created_at="false",t.value.start_hour="00:00",t.value.end_hour="23:59"});const l=$(),t=w({}),g=_e(),{showLoader:p,hideLoader:a}=me(),m=function(){let r=Me(t.value.start_date)+" "+t.value.start_hour,_=Me(t.value.end_date)+" "+t.value.end_hour;const v={from:r,to:_,location_permalink:o.location_permalink,created_at:"false"};k(v)},k=async function(r){p(),await g.downloadReport(r).then(()=>{a(),e.emit("onSubmit")}).catch(_=>{a(),B(l,_)})};return{form:t,onSubmit:m,setDefaultIfBlank:function(){(!t.value.start_hour||t.value.start_hour=="")&&(t.value.start_hour="00:00"),(!t.value.end_hour||t.value.end_hour=="")&&(t.value.end_hour="23:59")}}},components:{Form:xt}},ca={class:"formgrid grid mt-3"},da={class:"field col-6 flex flex-column"},ua={class:"field col-6 flex flex-column"},ma={class:"flex align-items-center justify-content-end mt-6"};function fa(o,e,l,t,g,p){const a=b("Calendar"),m=b("InputMask"),k=b("Button"),u=b("Form");return f(),Q(u,{onSubmit:t.onSubmit},{default:D(()=>[n("div",ca,[n("div",da,[e[7]||(e[7]=n("label",{from:"start_date"},"Dal",-1)),i(a,{inputId:"start_date",modelValue:t.form.start_date,"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.start_date=r),dateFormat:"dd/mm/yy",manualInput:!0},null,8,["modelValue"]),e[8]||(e[8]=n("label",{from:"start_hour",class:"mt-3"},"Dalle",-1)),i(m,{id:"start_hour",modelValue:t.form.start_hour,"onUpdate:modelValue":e[1]||(e[1]=r=>t.form.start_hour=r),mask:"99:99",placeholder:"HH:mm",onBlur:e[2]||(e[2]=r=>t.setDefaultIfBlank())},null,8,["modelValue"])]),n("div",ua,[e[9]||(e[9]=n("label",{from:"end_date"},"Al",-1)),i(a,{inputId:"end_date",modelValue:t.form.end_date,"onUpdate:modelValue":e[3]||(e[3]=r=>t.form.end_date=r),dateFormat:"dd/mm/yy",manualInput:!0},null,8,["modelValue"]),e[10]||(e[10]=n("label",{from:"end_hour",class:"mt-3"},"Alle",-1)),i(m,{id:"end_hour",modelValue:t.form.end_hour,"onUpdate:modelValue":e[4]||(e[4]=r=>t.form.end_hour=r),mask:"99:99",placeholder:"HH:mm",onBlur:e[5]||(e[5]=r=>t.setDefaultIfBlank())},null,8,["modelValue"])])]),n("div",ma,[i(k,{label:"Annulla",text:"",onClick:e[6]||(e[6]=r=>o.$emit("onSubmit"))}),i(k,{label:"Scarica",type:"submit"})])]),_:1},8,["onSubmit"])}const pa=X(ra,[["render",fa]]),_a={setup(){const o=w({}),e=w({}),l=w(),t=w(!1),g=oe(),p=ht(),a=_e(),m=$(),k=Le(),u=N(()=>p.currentUser),r=N(()=>a.allLocations),_=N(()=>a.getCurrentLocation),v=N(()=>g.getPaymentMethods);Y(()=>{_.value&&(o.value.location=_.value,e.value.location_permalink=_.value.permalink),c().then(()=>{V()})});const V=async function(){var C;let d={};const S=((C=_==null?void 0:_.value)==null?void 0:C.permalink)??null;S?d.location_permalink=S:d.location_permalink=r.value[0].permalink,await g.fetchPaymentMethods(d).then(()=>{}).catch(R=>{B(m,R)})},c=async function(){await a.fetchAllLocations().then(()=>{_.value||(o.value.location=r.value[0],e.value.location_permalink=r.value[0].permalink,a.updateCurrenLocation(r.value[0]))}).catch(d=>{B(m,d)})};return{filters:o,orderTable:l,order_filters:e,visibleDialog:t,user:u,locations:r,newPaymentMethods:v,fetchAllLocations:c,formatDate:Ve,onUpdateFilters:function(d){d.course?o.value.course={id:d.course}:o.value.course="",d.name?o.value.name=d.name:o.value.name="",d.hour&&(d.hour.start_at?o.value.hour=d.hour.start_at:o.value.hour=d.hour)},onUpdateNewOrderFilters:function(d){d.start_at&&(e.value.hour=d.start_at),d.course_name&&(e.value.course={name:d.course_name}),d.date&&(e.value.date=d.date),d.hour&&(e.value.hour=d.hour),d.max_seats?e.value.max_seats=d.max_seats:e.value.max_seats=null,k.setNewOrderDialogVisibility(!0)},onCloseDialog:function(){l.value.loadLazyData()},onChangeLocation:function(){e.value.location_permalink=o.value.location.permalink,a.updateCurrenLocation(o.value.location)},onCloseReportDialog:function(){t.value=!1}}},components:{CalendarFilter:gn,OrderTable:fn,OrderFilter:Ln,NewOrderCard:sa,SalesReportsDialog:pa}};const va={class:"flex justify-content-between align-items-center"},ya={class:"field flex flex-column mt-3"},ga={class:"text-xl font-medium pl-3 py-0"},ha={key:0,style:{color:"#495057"},class:"flex flex-column align-items-end"},ba={class:"capitalize text-xl"},ka={class:"flex gap-4"},Ca={key:0,class:"col-3 mt-3"},wa={class:"col-9 mt-3"};function xa(o,e,l,t,g,p){var V,c;const a=b("Button"),m=b("SalesReportsDialog"),k=b("Dialog"),u=b("CalendarFilter"),r=b("NewOrderCard"),_=b("OrderFilter"),v=b("OrderTable");return f(),h("div",null,[n("div",va,[n("div",ya,[n("p",ga,x((c=(V=t.filters)==null?void 0:V.location)==null?void 0:c.name),1)]),t.filters&&t.filters.date?(f(),h("div",ha,[n("div",null,[e[6]||(e[6]=n("i",{class:"pi pi-calendar mr-2 text-xl"},null,-1)),n("span",ba,x(t.formatDate(t.filters.date)),1)]),i(a,{label:"Report visite",link:"",class:"m-0 p-0",onClick:e[0]||(e[0]=s=>t.visibleDialog=!0),icon:"pi pi-download"}),i(k,{visible:t.visibleDialog,"onUpdate:visible":e[2]||(e[2]=s=>t.visibleDialog=s),modal:"",header:"Report visite",style:{width:"35rem"}},{default:D(()=>[i(m,{onOnSubmit:e[1]||(e[1]=s=>t.onCloseReportDialog()),location_permalink:t.filters.location.permalink},null,8,["location_permalink"])]),_:1},8,["visible"])])):A("",!0)]),n("div",ka,[t.filters.location?(f(),h("div",Ca,[i(u,{filters:t.filters},null,8,["filters"]),i(r,{date:t.filters.date,filters:t.order_filters,onOnCloseDialog:e[3]||(e[3]=s=>t.onCloseDialog())},null,8,["date","filters"])])):A("",!0),n("div",wa,[i(_,{filters:t.filters,onOnSubmit:e[4]||(e[4]=s=>t.onUpdateFilters(s))},null,8,["filters"]),t.filters.date?(f(),Q(v,{key:0,filters:t.filters,ref:"orderTable",class:"mt-4",onUpdateFilters:e[5]||(e[5]=s=>t.onUpdateNewOrderFilters(s))},null,8,["filters"])):A("",!0)])])])}const La=X(_a,[["render",xa]]);export{La as default};
